<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>Rubik's Cube Visualizer</title>
    <link rel="stylesheet" href="/styles.css" />
    <link rel="stylesheet" href="/src/meta/tooltip.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>üé≤ Rubik's Cube Engine</h1>
        <p>Interactive 2D & 3D Visualizer</p>
      </header>

      <div class="main-content">
        <!-- Left Controls -->
        <div class="controls-left">
          <div class="control-section">
            <h3>View Mode</h3>
            <div class="mode-selector">
              <button id="mode-2d" class="mode-btn">2D Net View</button>
              <button id="mode-3d" class="mode-btn active">
                3D Interactive
              </button>
            </div>
            <div class="mode-selector" style="margin-top: 10px">
              <button
                id="toggle-labels"
                class="mode-btn active"
                title="Toggle face labels (U, R, F, D, L, B)"
              >
                üè∑Ô∏è Face Labels
              </button>
            </div>
          </div>

          <div class="control-section">
            <h3>Cube Moves</h3>
            <div class="move-controls">
              <div>
                <div class="move-group-label">Up (U)</div>
                <div class="move-group">
                  <button class="move-btn" data-move="U">U</button>
                  <button class="move-btn" data-move="U'">U'</button>
                  <button class="move-btn" data-move="U2">U2</button>
                </div>
              </div>
              <div>
                <div class="move-group-label">Right (R)</div>
                <div class="move-group">
                  <button class="move-btn" data-move="R">R</button>
                  <button class="move-btn" data-move="R'">R'</button>
                  <button class="move-btn" data-move="R2">R2</button>
                </div>
              </div>
              <div>
                <div class="move-group-label">Front (F)</div>
                <div class="move-group">
                  <button class="move-btn" data-move="F">F</button>
                  <button class="move-btn" data-move="F'">F'</button>
                  <button class="move-btn" data-move="F2">F2</button>
                </div>
              </div>
              <div>
                <div class="move-group-label">Down (D)</div>
                <div class="move-group">
                  <button class="move-btn" data-move="D">D</button>
                  <button class="move-btn" data-move="D'">D'</button>
                  <button class="move-btn" data-move="D2">D2</button>
                </div>
              </div>
              <div>
                <div class="move-group-label">Left (L)</div>
                <div class="move-group">
                  <button class="move-btn" data-move="L">L</button>
                  <button class="move-btn" data-move="L'">L'</button>
                  <button class="move-btn" data-move="L2">L2</button>
                </div>
              </div>
              <div>
                <div class="move-group-label">Back (B)</div>
                <div class="move-group">
                  <button class="move-btn" data-move="B">B</button>
                  <button class="move-btn" data-move="B'">B'</button>
                  <button class="move-btn" data-move="B2">B2</button>
                </div>
              </div>
            </div>
          </div>

          <div class="control-section">
            <h3>üé® Cube Colors</h3>
            <div class="theme-selector">
              <button class="cube-theme-btn active" data-cube-theme="classic">
                üéØ Classic
              </button>
              <button class="cube-theme-btn" data-cube-theme="ocean">
                üåä Ocean
              </button>
              <button class="cube-theme-btn" data-cube-theme="forest">
                üå≤ Forest
              </button>
              <button class="cube-theme-btn" data-cube-theme="sunset">
                üåÖ Sunset
              </button>
              <button class="cube-theme-btn" data-cube-theme="candy">
                üç¨ Candy
              </button>
              <button class="cube-theme-btn" data-cube-theme="galaxy">
                üåå Galaxy
              </button>
              <button class="cube-theme-btn" data-cube-theme="retro">
                üìº Retro
              </button>
              <button class="cube-theme-btn" data-cube-theme="cyberpunk">
                ü§ñ Cyberpunk
              </button>
              <button class="cube-theme-btn" data-cube-theme="pastel">
                üå∏ Pastel
              </button>
              <button class="cube-theme-btn" data-cube-theme="mint">
                üçÉ Mint
              </button>
            </div>
          </div>

          <div class="control-section">
            <h3>üí° Lighting</h3>
            <div class="lighting-controls">
              <div class="control-group">
                <label for="brightness-slider">Brightness</label>
                <input
                  type="range"
                  id="brightness-slider"
                  min="0.5"
                  max="2.0"
                  step="0.1"
                  value="1.0"
                />
                <span id="brightness-value">100%</span>
              </div>
              <div class="control-group">
                <label for="light-angle-slider">Light Angle</label>
                <input
                  type="range"
                  id="light-angle-slider"
                  min="0"
                  max="360"
                  step="15"
                  value="45"
                />
                <span id="light-angle-value">45¬∞</span>
              </div>
            </div>
          </div>

          <div class="control-section theme-section">
            <h3>Theme</h3>
            <div class="theme-selector">
              <button class="theme-btn active" data-theme="cyber-blue">
                üåä Cyber Blue
              </button>
              <button class="theme-btn" data-theme="purple-haze">
                üíú Purple Haze
              </button>
              <button class="theme-btn" data-theme="forest-green">
                üå≤ Forest Green
              </button>
              <button class="theme-btn" data-theme="sunset-orange">
                üåÖ Sunset Orange
              </button>
              <button class="theme-btn" data-theme="midnight-black">
                üåô Midnight Black
              </button>
            </div>
          </div>
        </div>

        <!-- Center Canvas -->
        <div class="canvas-container">
          <canvas id="canvas-2d"></canvas>
          <canvas id="canvas-3d" class="active"></canvas>
          <p class="hint" id="hint-3d" class="visible">
            üí° Drag or swipe to rotate
          </p>
        </div>

        <!-- Right Controls -->
        <div class="controls-right">
          <div class="control-section">
            <h3>Sequence Input</h3>
            <div class="action-controls">
              <input
                type="text"
                id="move-sequence"
                placeholder="e.g., R U R' U'"
              />
              <button id="apply-sequence" class="action-btn">
                Apply Sequence
              </button>
            </div>
          </div>

          <div class="control-section">
            <h3>üß© Algorithms</h3>
            <div class="algorithm-controls">
              <select id="algorithm-category" class="algorithm-select">
                <option value="">Select Category...</option>
                <option value="beginner">Beginner Patterns</option>
                <option value="oll">OLL (Orient Last Layer)</option>
                <option value="pll">PLL (Permute Last Layer)</option>
                <option value="f2l">F2L (First Two Layers)</option>
                <option value="tricks">Cool Tricks</option>
              </select>
              <select id="algorithm-select" class="algorithm-select" disabled>
                <option value="">Choose an algorithm...</option>
              </select>
              <button id="apply-algorithm" class="action-btn" disabled>
                Apply Algorithm
              </button>
              <div id="algorithm-info" class="algorithm-info"></div>
            </div>
          </div>

          <div class="control-section">
            <h3>Move History</h3>
            <div class="history">
              <div id="move-history"></div>
              <button id="undo" class="action-btn" disabled>Undo Last</button>
            </div>
          </div>

          <div class="control-section">
            <h3>Actions</h3>
            <div class="action-controls">
              <button id="scramble" class="action-btn">Random Scramble</button>
              <button id="reset" class="action-btn secondary">
                Reset to Solved
              </button>
            </div>
          </div>

          <div class="control-section">
            <details>
              <summary style="cursor: pointer; user-select: none">
                üîä Sound Settings
              </summary>
              <div class="sound-controls" style="margin-top: 15px">
                <!-- Volume -->
                <div class="slider-control">
                  <label for="sound-volume">Volume</label>
                  <input
                    type="range"
                    id="sound-volume"
                    min="0"
                    max="1"
                    step="0.01"
                    value="0.3"
                  />
                  <span id="sound-volume-value">30%</span>
                </div>

                <!-- 3-Band EQ -->
                <h4
                  style="
                    margin-top: 15px;
                    margin-bottom: 8px;
                    font-size: 0.9rem;
                  "
                >
                  3-Band EQ
                </h4>
                <div class="slider-control">
                  <label for="sound-low">Low (200 Hz)</label>
                  <input
                    type="range"
                    id="sound-low"
                    min="-12"
                    max="12"
                    step="0.5"
                    value="0"
                  />
                  <span id="sound-low-value">0 dB</span>
                </div>
                <div class="slider-control">
                  <label for="sound-mid">Mid (1k Hz)</label>
                  <input
                    type="range"
                    id="sound-mid"
                    min="-12"
                    max="12"
                    step="0.5"
                    value="0"
                  />
                  <span id="sound-mid-value">0 dB</span>
                </div>
                <div class="slider-control">
                  <label for="sound-high">High (5k Hz)</label>
                  <input
                    type="range"
                    id="sound-high"
                    min="-12"
                    max="12"
                    step="0.5"
                    value="0"
                  />
                  <span id="sound-high-value">0 dB</span>
                </div>

                <!-- Filter -->
                <h4
                  style="
                    margin-top: 15px;
                    margin-bottom: 8px;
                    font-size: 0.9rem;
                  "
                >
                  Filter
                </h4>
                <div class="slider-control">
                  <label for="sound-brightness">Brightness</label>
                  <input
                    type="range"
                    id="sound-brightness"
                    min="0"
                    max="1"
                    step="0.01"
                    value="0.5"
                  />
                  <span id="sound-brightness-value">50%</span>
                </div>

                <!-- Envelope -->
                <h4
                  style="
                    margin-top: 15px;
                    margin-bottom: 8px;
                    font-size: 0.9rem;
                  "
                >
                  Envelope
                </h4>
                <div class="slider-control">
                  <label for="sound-attack">Attack</label>
                  <input
                    type="range"
                    id="sound-attack"
                    min="0.001"
                    max="0.01"
                    step="0.0001"
                    value="0.002"
                  />
                  <span id="sound-attack-value">2.0 ms</span>
                </div>
                <div class="slider-control">
                  <label for="sound-decay">Decay</label>
                  <input
                    type="range"
                    id="sound-decay"
                    min="0.02"
                    max="0.15"
                    step="0.001"
                    value="0.06"
                  />
                  <span id="sound-decay-value">60 ms</span>
                </div>
              </div>
            </details>
          </div>

          <div class="control-section debug-info">
            <details>
              <summary style="cursor: pointer; user-select: none">
                ‚å®Ô∏è Keyboard Shortcuts
              </summary>
              <div style="margin-top: 10px; font-size: 0.85rem; color: #666">
                <p style="margin-bottom: 8px">
                  <strong>Move keys:</strong>
                </p>
                <ul style="margin: 8px 0; padding-left: 20px; line-height: 1.8">
                  <li><code>U/R/F/D/L/B</code> - Face moves</li>
                  <li><code>Shift + Key</code> - Prime moves (U', R', etc.)</li>
                  <li>
                    <code>Shift + Ctrl + Key</code> - Double moves (U2, R2,
                    etc.)
                  </li>
                  <li><code>Ctrl + Z</code> - Undo last move</li>
                </ul>
              </div>
            </details>
          </div>

          <div class="control-section debug-info">
            <details>
              <summary style="cursor: pointer; user-select: none">
                üîß Debug Mode
              </summary>
              <div style="margin-top: 10px; font-size: 0.85rem; color: #666">
                <p>
                  Add <code>?debug=true</code> to URL or open console and type:
                </p>
                <pre
                  style="
                    background: #f5f5f5;
                    padding: 8px;
                    border-radius: 4px;
                    overflow-x: auto;
                  "
                >
window.cubeDebug.enable()</pre
                >
                <p style="margin-top: 8px">Commands:</p>
                <ul style="margin: 8px 0; padding-left: 20px; line-height: 1.6">
                  <li><code>setSlowMotion(2)</code> - Half speed</li>
                  <li>
                    <code>highlightCubies(true)</code> - Highlight rotating
                    cubies
                  </li>
                  <li><code>logAnimations(true/false)</code> - Toggle logs</li>
                  <li><code>getState()</code> - View config</li>
                </ul>
              </div>
            </details>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="/src/app.ts"></script>
  </body>
</html>
